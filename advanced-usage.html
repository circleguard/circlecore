<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Contributing" href="contributing.html" /><link rel="prev" title="Caching" href="caching.html" />

    <!-- Generated with Sphinx 6.1.3 and Furo 2022.12.07 -->
        <title>Advanced Usage - Circleguard v5.4.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=91d0f0d1c444bdcb17a68e833c7a53903343c195" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Circleguard v5.4.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">Circleguard v5.4.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Circlecore</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorial</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="foreword.html">Foreword</a></li>
<li class="toctree-l1"><a class="reference internal" href="representing-replays.html">Representing Replays</a></li>
<li class="toctree-l1"><a class="reference internal" href="using-circleguard.html">Using Circleguard</a></li>
<li class="toctree-l1"><a class="reference internal" href="replay-containers.html">Replay Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="loading.html">Loading</a></li>
<li class="toctree-l1"><a class="reference internal" href="caching.html">Caching</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Advanced Usage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="advanced-usage">
<h1>Advanced Usage<a class="headerlink" href="#advanced-usage" title="Permalink to this heading">#</a></h1>
<p>This is a hodgepodge of circleguard features not mentioned in other parts of the documentation. This page is
written at a high level and is intended for developers who know what they are doing, and are just looking for a
page listing all the things they <em>can</em> do, or are looking to learn more about circleguard’s internals.</p>
<section id="retrieve-a-beatmap">
<h2>Retrieve a Beatmap<a class="headerlink" href="#retrieve-a-beatmap" title="Permalink to this heading">#</a></h2>
<p>To retrieve a beatmap from a replay, call <a class="reference internal" href="appendix.html#circleguard.circleguard.Circleguard.beatmap" title="circleguard.circleguard.Circleguard.beatmap"><code class="xref py py-func docutils literal notranslate"><span class="pre">cg.beatmap()</span></code></a>. This returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if the replay cannot determine
what beatmap it was set on, and a <a class="reference external" href="https://llllllllll.github.io/slider/appendix.html#slider.beatmap.Beatmap" title="(in slider v0.2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">slider.Beatmap</span></code></a> otherwise.</p>
</section>
<section id="generate-a-frametime-graph">
<h2>Generate a Frametime Graph<a class="headerlink" href="#generate-a-frametime-graph" title="Permalink to this heading">#</a></h2>
<p>To generate a frametime graph, call <a class="reference internal" href="appendix.html#circleguard.circleguard.Circleguard.frametime_graph" title="circleguard.circleguard.Circleguard.frametime_graph"><code class="xref py py-func docutils literal notranslate"><span class="pre">cg.frametime_graph()</span></code></a>. This is the same method that
<a class="reference external" href="https://github.com/circleguard/circleguard">circleguard</a> calls to generate its frametime graphs.</p>
<p>You must have matplotlib installed to use this method.</p>
</section>
<section id="utilities">
<h2>Utilities<a class="headerlink" href="#utilities" title="Permalink to this heading">#</a></h2>
<section id="convert-statistic">
<h3>convert_statistic<a class="headerlink" href="#convert-statistic" title="Permalink to this heading">#</a></h3>
<p><a class="reference internal" href="appendix.html#circleguard.utils.convert_statistic" title="circleguard.utils.convert_statistic"><code class="xref py py-func docutils literal notranslate"><span class="pre">convert_statistic()</span></code></a> converts a gameplay statistic such as unstable rate to its converted or unconverted form, given the mods
a replay was played with.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">convert_statistic</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="n">Mod</span><span class="o">.</span><span class="n">HDDT</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s2">&quot;cv&quot;</span><span class="p">)</span>
<span class="go">10.666666666666666</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">convert_statistic</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="n">Mod</span><span class="o">.</span><span class="n">HDDT</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s2">&quot;ucv&quot;</span><span class="p">)</span>
<span class="go">24</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">convert_statistic</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="n">Mod</span><span class="o">.</span><span class="n">NM</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s2">&quot;cv&quot;</span><span class="p">)</span>
<span class="go">16</span>
</pre></div>
</div>
<p>A “statistic” in this context is anything modified by the game speed. So frametime and unstable rate are both “statistics”
that come in either a converted or unconverted form.</p>
</section>
<section id="replay-pairs">
<h3>replay_pairs<a class="headerlink" href="#replay-pairs" title="Permalink to this heading">#</a></h3>
<p><a class="reference internal" href="appendix.html#circleguard.utils.replay_pairs" title="circleguard.utils.replay_pairs"><code class="xref py py-func docutils literal notranslate"><span class="pre">replay_pairs()</span></code></a> generates the pairs of replays which should be compared to cover all cases of replay stealing among the passed
sets of replays. See its documentation for more details.</p>
</section>
<section id="fuzzy-mods">
<h3>fuzzy_mods<a class="headerlink" href="#fuzzy-mods" title="Permalink to this heading">#</a></h3>
<p><a class="reference internal" href="appendix.html#circleguard.utils.fuzzy_mods" title="circleguard.utils.fuzzy_mods"><code class="xref py py-func docutils literal notranslate"><span class="pre">fuzzy_mods()</span></code></a> returns all the mod combinations with the given required and optional mods:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fuzzy_mods</span><span class="p">(</span><span class="n">Mod</span><span class="o">.</span><span class="n">HD</span><span class="p">,</span> <span class="p">[</span><span class="n">Mod</span><span class="o">.</span><span class="n">DT</span><span class="p">])</span>
<span class="go">[HD, HDDT]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fuzzy_mods</span><span class="p">(</span><span class="n">Mod</span><span class="o">.</span><span class="n">HD</span><span class="p">,</span> <span class="p">[</span><span class="n">Mod</span><span class="o">.</span><span class="n">EZ</span><span class="p">,</span> <span class="n">Mod</span><span class="o">.</span><span class="n">DT</span><span class="p">])</span>
<span class="go">[HD, HDDT, HDEZ, HDDTEZ]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fuzzy_mods</span><span class="p">(</span><span class="n">Mod</span><span class="o">.</span><span class="n">NM</span><span class="p">,</span> <span class="p">[</span><span class="n">Mod</span><span class="o">.</span><span class="n">EZ</span><span class="p">,</span> <span class="n">Mod</span><span class="o">.</span><span class="n">DT</span><span class="p">])</span>
<span class="go">[NM, DT, EZ, DTEZ]</span>
</pre></div>
</div>
<p>See its documentation for more details.</p>
</section>
<section id="order">
<h3>order<a class="headerlink" href="#order" title="Permalink to this heading">#</a></h3>
<p><a class="reference internal" href="appendix.html#circleguard.utils.order" title="circleguard.utils.order"><code class="xref py py-func docutils literal notranslate"><span class="pre">order()</span></code></a> returns 2-tuple of the given replays, with the replay that was played earlier first and the replay that was played later second.</p>
</section>
</section>
<section id="subclassing-replay">
<h2>Subclassing Replay<a class="headerlink" href="#subclassing-replay" title="Permalink to this heading">#</a></h2>
<p>Subclassing <a class="reference internal" href="appendix.html#circleguard.loadables.Replay" title="circleguard.loadables.Replay"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replay</span></code></a> can be useful if you want to pull replay data from a source that circleguard doesn’t support, or if
you want to customize the replay data processing. One common use case I can think of is providing a <code class="docutils literal notranslate"><span class="pre">ReplayAkatsuki</span></code> (or
(some similar class for another private server) which uses a private server’s api to create a replay.</p>
<p>When sublcassing <a class="reference internal" href="appendix.html#circleguard.loadables.Replay" title="circleguard.loadables.Replay"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replay</span></code></a>, you must provide an implementation of the <code class="docutils literal notranslate"><span class="pre">load</span></code> method. You will also
want to consider overriding the <code class="docutils literal notranslate"><span class="pre">beatmap</span></code> and <code class="docutils literal notranslate"><span class="pre">map_available</span></code> methods, especially if your replay subclass
could be played on beatmaps that aren’t available from the official osu! servers, or if you want to customize
where the beatmap gets loaded from. However, overriding these methods is not necessary. Only the <code class="docutils literal notranslate"><span class="pre">load</span></code>
method must be provided.</p>
<section id="load">
<h3>load<a class="headerlink" href="#load" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">load</span></code> method is what circleguard calls to load the replay data of the replay. This method is responsible for retrieving the
replay’s replay data from whatever data source it wants (an api, a replay file, a database, etc). Once it does so, it must call
<code class="docutils literal notranslate"><span class="pre">self._process_replay_data</span></code> with the loaded replay data and set <code class="docutils literal notranslate"><span class="pre">self.loaded</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>One philosophy of circleguard is that <a class="reference internal" href="appendix.html#circleguard.loadables.Replay" title="circleguard.loadables.Replay"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replay</span></code></a> objects are pseudo lazy loaded. That is, they are cheap to
instantiate and only incur a cost when they need to be loaded. This is why we require that loading logic goes into
its own <code class="docutils literal notranslate"><span class="pre">load</span></code> method instead of happening on instantiation.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">load</span></code> takes two arguments: <code class="docutils literal notranslate"><span class="pre">loader</span></code> (a <a class="reference internal" href="appendix.html#circleguard.loader.Loader" title="circleguard.loader.Loader"><code class="xref py py-class docutils literal notranslate"><span class="pre">Loader</span></code></a> instance) and <code class="docutils literal notranslate"><span class="pre">cache</span></code> (a boolean). <code class="docutils literal notranslate"><span class="pre">loader</span></code> provides you with access to
the api, should your replay need it. <code class="docutils literal notranslate"><span class="pre">cache</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code> if the replay should be cached to the database once loaded, and
<code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise. You do not have to respect <code class="docutils literal notranslate"><span class="pre">cache</span></code>, even if <code class="docutils literal notranslate"><span class="pre">True</span></code>, if you do not want to (or cannot) implement caching
for your replay. For instance, we do not currently cache <a class="reference internal" href="appendix.html#circleguard.loadables.ReplayPath" title="circleguard.loadables.ReplayPath"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplayPath</span></code></a> instances under any circumstances.</p>
<p>In order to facilitate replays which can be loaded without api access, <code class="docutils literal notranslate"><span class="pre">loader</span></code> may be null. If your replay needs api access
to load itself, and is passed a null <code class="docutils literal notranslate"><span class="pre">loader</span></code>, raise an error:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">loader</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;A Map cannot be info loaded without api &quot;</span>
        <span class="s2">&quot;access&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If your replay does not need api access, you may safely ignore the <code class="docutils literal notranslate"><span class="pre">loader</span></code> argument.</p>
<p>The replay data that you pass to <code class="docutils literal notranslate"><span class="pre">_process_replay_data</span></code> must be a list of
<a class="reference external" href="https://github.com/kszlim/osu-replay-parser#attributes">osrparse.ReplayEventOsu</a> objects. You should convert your replay data
to instances of this class yourself if your data does not come as osrparse objects by default.</p>
<p>If your replay cannot load its replay data for whatever reason, pass <code class="docutils literal notranslate"><span class="pre">None</span></code> to <code class="docutils literal notranslate"><span class="pre">_process_replay_data</span></code>. Do <strong>not</strong> pass an empty list,
as this has a different meaning (that the replay data is empty instead of unretrievable).</p>
<p>There are several attributes which you should always set if you can retrieve them. Some circleguard features will not work without these -
for instance, replays without a timestamp cannot be ordered, and replays without a map id cannot have their beatmap retrieved (unless you
provide an alternative <code class="docutils literal notranslate"><span class="pre">beatmap</span></code> method; more on this later). You can view a full list of these attributes in the <a class="reference internal" href="appendix.html#circleguard.loadables.Replay" title="circleguard.loadables.Replay"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replay</span></code></a> documentation.</p>
<p>For instance, <a class="reference internal" href="appendix.html#circleguard.loadables.ReplayMap" title="circleguard.loadables.ReplayMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplayMap</span></code></a> makes api calls during its <code class="docutils literal notranslate"><span class="pre">load</span></code> method, which tells it the following attributes: <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>, <code class="docutils literal notranslate"><span class="pre">username</span></code>,
<code class="docutils literal notranslate"><span class="pre">mods</span></code>, and <code class="docutils literal notranslate"><span class="pre">replay_id</span></code>. So <a class="reference internal" href="appendix.html#circleguard.loadables.ReplayMap" title="circleguard.loadables.ReplayMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplayMap</span></code></a> sets these attributes inside its <code class="docutils literal notranslate"><span class="pre">load</span></code> method (alongside <code class="docutils literal notranslate"><span class="pre">game_version</span></code>, which it
can estimate from the timestamp):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">timestamp</span>
<span class="c1"># estimate version with timestamp, this is only accurate if the user</span>
<span class="c1"># keeps their game up to date</span>
<span class="bp">self</span><span class="o">.</span><span class="n">game_version</span> <span class="o">=</span> <span class="n">GameVersion</span><span class="o">.</span><span class="n">from_datetime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">,</span>
    <span class="n">concrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">username</span>
<span class="bp">self</span><span class="o">.</span><span class="n">mods</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">mods</span>
<span class="bp">self</span><span class="o">.</span><span class="n">replay_id</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">replay_id</span>
</pre></div>
</div>
<p>Your replay subclass should set as many of these attributes as your data source can provide.</p>
</section>
<section id="beatmap">
<h3>beatmap<a class="headerlink" href="#beatmap" title="Permalink to this heading">#</a></h3>
<p>The purpose of this method is to return a <a class="reference external" href="https://llllllllll.github.io/slider/appendix.html#slider.beatmap.Beatmap" title="(in slider v0.2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">slider.Beatmap</span></code></a> representing the beatmap that this replay was played on.</p>
<p>Some circleguard methods require a <a class="reference external" href="https://llllllllll.github.io/slider/appendix.html#slider.beatmap.Beatmap" title="(in slider v0.2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">slider.Beatmap</span></code></a> to work properly (a currently exhaustive list is <a class="reference internal" href="appendix.html#circleguard.circleguard.Circleguard.ur" title="circleguard.circleguard.Circleguard.ur"><code class="xref py py-func docutils literal notranslate"><span class="pre">cg.ur()</span></code></a>, <a class="reference internal" href="appendix.html#circleguard.circleguard.Circleguard.hits" title="circleguard.circleguard.Circleguard.hits"><code class="xref py py-func docutils literal notranslate"><span class="pre">cg.hits()</span></code></a>, and
<a class="reference internal" href="appendix.html#circleguard.circleguard.Circleguard.judgments" title="circleguard.circleguard.Circleguard.judgments"><code class="xref py py-func docutils literal notranslate"><span class="pre">cg.judgments()</span></code></a>), or a beatmap can be optionally used to improve some statistical calculations. Whenever a beatmap is
required, <a class="reference internal" href="appendix.html#circleguard.circleguard.Circleguard" title="circleguard.circleguard.Circleguard"><code class="xref py py-class docutils literal notranslate"><span class="pre">Circleguard</span></code></a> calls <a class="reference internal" href="appendix.html#circleguard.loadables.Replay.beatmap" title="circleguard.loadables.Replay.beatmap"><code class="xref py py-func docutils literal notranslate"><span class="pre">replay.Beatmap()</span></code></a>, passing its <a class="reference external" href="https://llllllllll.github.io/slider/appendix.html#slider.library.Library" title="(in slider v0.2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">slider.Library</span></code></a> instance.</p>
<p>The default implementation of <code class="docutils literal notranslate"><span class="pre">beatmap</span></code> is to use the replay’s map id and ask the passed <a class="reference external" href="https://llllllllll.github.io/slider/appendix.html#slider.library.Library" title="(in slider v0.2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">slider.Library</span></code></a> to retrieve the beatmap
with that id. If the replay does not provide a map id, the replay will be unable to provide a beatmap by default, since it doesn’t
know what map it was played on.</p>
<p>To override this behavior, override <code class="docutils literal notranslate"><span class="pre">beatmap</span></code> and return either a <a class="reference external" href="https://llllllllll.github.io/slider/appendix.html#slider.beatmap.Beatmap" title="(in slider v0.2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">slider.Beatmap</span></code></a> object, or <code class="docutils literal notranslate"><span class="pre">None</span></code> if a beatmap could not be retrieved.</p>
<p>You can can query the passed library for the relevant beatmap if you find it useful, or you can ignore it in favor of retrieving the
beatmap another way. However, remember that at the end of the day you must return a <a class="reference external" href="https://llllllllll.github.io/slider/appendix.html#slider.beatmap.Beatmap" title="(in slider v0.2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">slider.Beatmap</span></code></a>. See slider’s documentation
for more details on creating beatmaps from scratch, or from an osu! file, if you need them.</p>
</section>
<section id="map-available">
<h3>map_available<a class="headerlink" href="#map-available" title="Permalink to this heading">#</a></h3>
<p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the replay <em>could</em> retrieve its beatmap if asked, and false otherwise. This is intended to be an inexpensive alternative
to calling <code class="docutils literal notranslate"><span class="pre">beatmap</span></code> and checking for a null response.</p>
</section>
</section>
<section id="subclassing-replaycontainer">
<h2>Subclassing ReplayContainer<a class="headerlink" href="#subclassing-replaycontainer" title="Permalink to this heading">#</a></h2>
<p>To add a new <a class="reference internal" href="appendix.html#circleguard.loadables.ReplayContainer" title="circleguard.loadables.ReplayContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplayContainer</span></code></a>, you need only provide the <code class="docutils literal notranslate"><span class="pre">load_info</span></code> and <code class="docutils literal notranslate"><span class="pre">all_replays</span></code> methods.</p>
<p>Unless you know exactly what you’re doing, you likely do <strong>not</strong> want to override <code class="docutils literal notranslate"><span class="pre">load</span></code> on a <a class="reference internal" href="appendix.html#circleguard.loadables.ReplayContainer" title="circleguard.loadables.ReplayContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplayContainer</span></code></a>. The default
implementation should be exactly what you want.</p>
<section id="load-info">
<h3>load_info<a class="headerlink" href="#load-info" title="Permalink to this heading">#</a></h3>
<p>When called, the <a class="reference internal" href="appendix.html#circleguard.loadables.ReplayContainer" title="circleguard.loadables.ReplayContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplayContainer</span></code></a> should populate itself with <a class="reference internal" href="appendix.html#circleguard.loadables.Replay" title="circleguard.loadables.Replay"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replay</span></code></a> instances. It should only create them and not load them; they
will be loaded when <code class="docutils literal notranslate"><span class="pre">ReplayContainer#load</span></code> is called. A <a class="reference internal" href="appendix.html#circleguard.loader.Loader" title="circleguard.loader.Loader"><code class="xref py py-class docutils literal notranslate"><span class="pre">Loader</span></code></a> instance is passed to this method to provide access to the api.</p>
</section>
<section id="all-replays">
<h3>all_replays<a class="headerlink" href="#all-replays" title="Permalink to this heading">#</a></h3>
<p>A list of all replays in this <a class="reference internal" href="appendix.html#circleguard.loadables.ReplayContainer" title="circleguard.loadables.ReplayContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplayContainer</span></code></a>. This is provided to allow for arbitrarily complex storages of replays. For instance,
there might be a replay container which partitions its replay list into two sets, and stores those as separate attibutes. Such a
replay container would return the union of those sets in this method.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the above instructions for subclassing <a class="reference internal" href="appendix.html#circleguard.loadables.Replay" title="circleguard.loadables.Replay"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replay</span></code></a> and <a class="reference internal" href="appendix.html#circleguard.loadables.ReplayContainer" title="circleguard.loadables.ReplayContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplayContainer</span></code></a> are unclear, you should look at the
source code for examples. Every default <a class="reference internal" href="appendix.html#circleguard.loadables.Replay" title="circleguard.loadables.Replay"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replay</span></code></a> and <a class="reference internal" href="appendix.html#circleguard.loadables.ReplayContainer" title="circleguard.loadables.ReplayContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplayContainer</span></code></a> subclass is well abstracted and documented in the source
code, and may be a clearer guide to follow than the above examples. See
<a class="reference external" href="https://github.com/circleguard/circlecore/blob/master/circleguard/loadables.py">https://github.com/circleguard/circlecore/blob/master/circleguard/loadables.py</a> for the file containing these classes.</p>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="contributing.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Contributing</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="caching.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Caching</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Advanced Usage</a><ul>
<li><a class="reference internal" href="#retrieve-a-beatmap">Retrieve a Beatmap</a></li>
<li><a class="reference internal" href="#generate-a-frametime-graph">Generate a Frametime Graph</a></li>
<li><a class="reference internal" href="#utilities">Utilities</a><ul>
<li><a class="reference internal" href="#convert-statistic">convert_statistic</a></li>
<li><a class="reference internal" href="#replay-pairs">replay_pairs</a></li>
<li><a class="reference internal" href="#fuzzy-mods">fuzzy_mods</a></li>
<li><a class="reference internal" href="#order">order</a></li>
</ul>
</li>
<li><a class="reference internal" href="#subclassing-replay">Subclassing Replay</a><ul>
<li><a class="reference internal" href="#load">load</a></li>
<li><a class="reference internal" href="#beatmap">beatmap</a></li>
<li><a class="reference internal" href="#map-available">map_available</a></li>
</ul>
</li>
<li><a class="reference internal" href="#subclassing-replaycontainer">Subclassing ReplayContainer</a><ul>
<li><a class="reference internal" href="#load-info">load_info</a></li>
<li><a class="reference internal" href="#all-replays">all_replays</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/scripts/furo.js"></script>
    </body>
</html>